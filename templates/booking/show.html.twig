{% extends 'base.html.twig' %}

{% block title %}Booking n°{{ booking.id }} - {{parent()}}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .imgpic{
            width: 5rem;
            height: 5rem;
            border-radius: 50%;
            object-fit: contain;
            border: 2px solid gray;
        }
        .coverBooking{
            height: 100%;
            object-fit: contain;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container">

{% if app.request.query.get('withAlert') %}

<div class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>
      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>

  </strong> Félicitation, votre réservation chez 
  {{booking.ad.author.lastName}} {{booking.ad.author.firstName}}
   pour l'annonce 
   {{booking.ad.title}} 
   a bien été prise en compte. Vous allez recevoir un email de confirmation.
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

{% endif %}
    
            <h1 class="text-center">Confirmation de votre réservation n°{{ booking.id }} </h1>

<div class="row">
        <table class="table table-info table-striped table-hover">
        <tbody>
            <tr>
                <th>Id Réservation</th>
                <td>{{ booking.id }}</td>
            </tr>
            <tr>
                <th>Date d'arrivée</th>
                <td>{{ booking.startDate ? booking.startDate|date('d/m/Y') : '' }}</td>
            </tr>
            <tr>
                <th>Date de départ</th>
                <td>{{ booking.createdAt ? booking.createdAt|date('d/m/Y') : '' }}</td>
            </tr>
            <tr>
                <th>Montant total</th>
                <td>{{ booking.amount|number_format(2, ',', '.')  }} &euro;</td>
            </tr>
            <tr>
                <th>Date d'achat</th>
                <td>{{ booking.reservationDate ? booking.reservationDate|date('d/m/Y') : '' }}</td>
            </tr>
        </tbody>
    </table>
</div>
    <div class="row mt-3">
    <h4 class="text-center">
        Information de votre hébergement :
    </h4>

    <div class="col-md-3">
    <a href="{{path('app_user_show',{'slug':booking.ad.author.slug})}}">
    <img src="{{booking.ad.author.profilPicture}}" alt="{{booking.ad.author.firstname}}-{{booking.ad.author.lastName}}" class="img-fluid imgpic"><br>
</a>
    {{booking.ad.author.firstname}} {{booking.ad.author.lastName}}<br>
    {{booking.ad.author.email}}<br>
    {{booking.ad.author.phone}}<br>
    {{booking.ad.author.address}}<br>
    {{booking.ad.author.postalCode}} {{booking.ad.author.city}}<br>
    {{booking.ad.author.country}}<br>
    <a href="{{path('app_user_show',{'slug':booking.ad.author.slug})}}" class="text-decoration-none">
	<span class="badge bg-primary">{{booking.ad.author.ads|length}} annonces</span>
							</a>
    </div>
    <div class="col-md-9">
        <div class="card mb-3 border-0" style="max-width: 540px;">
  <div class="row g-0">
    <div class="col-md-4">
    <a href="{{path('app_ad_show',{'slug':booking.ad.slug})}}">
      <img src="{{booking.ad.coverImage}}" class="img-fluid coverBooking" alt="...">
    </a>
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">Hébergement : {{booking.ad.title}}</h5>
        <p class="card-text">{{booking.ad.introduction}}</p>
        <p class="card-text"><small class="text-muted">En ligne depuis le {{booking.ad.createdAt|date('d/m/Y')}}</small></p>
        <a href="{{path('app_ad_show',{'slug':booking.ad.slug})}}" class="btn btn-info btn-sm">Plus d'Information</a>
      </div>
    </div>
  </div>
</div>

    </div>


</div>

    </div>
{% endblock %}
